# 版本发布说明 — v1.0.0

**发布日期**: 2024-02-13
**里程碑**: 首个稳定版本

---

## 🎉 亮点

**Cyber Qin 赛博琴仙** v1.0.0 标志着首个稳定版本的发布，为游戏实时演奏、MIDI 播放与编辑带来完整功能集，并提供全面的 UI 改进与用户需求功能。

---

## ✨ 新功能

### 设置对话框
- **集中化配置** (`Ctrl+,`)：在单一界面管理所有应用程序设置
- **MIDI 设备选择**：设置偏好的 MIDI 设备，启动时自动优先连接
- **持久化偏好设置**：设置自动保存并在重启后恢复

### 键位映射查看器
- **只读映射表**：查看当前方案的完整 MIDI-键盘映射
- **四栏显示**：MIDI 音符、音符名称、键盘按键、修饰键
- **从演奏模式访问**：点击「查看映射」按钮快速参考

### 增强的 MIDI 热插拔支持
- **自动设备检测**：断线时每 5 秒扫描新增/移除的设备
- **变更记录**：实时记录设备连接/断线事件
- **无缝重连**：检测到偏好设备时自动连接

### 循环播放模式
- **曲库循环切换**：在曲库视图中启用循环模式以连续播放
- **编辑器循环切换**：在编曲器中按 `L` 键切换编辑时的循环播放
- **金色启用指示器**：启用时按钮显示金色 (#D4AF37) 背景

### 节拍器倒数
- **可选 4 拍倒数**：播放前可切换节拍器开关
- **可视化倒数指示器**：屏幕上显示大型金色数字 (4→3→2→1)
- **编辑器快捷键**：在编曲器中按 `M` 键切换节拍器
- **默认启用**：确保顺畅切换到游戏窗口

---

## 🔧 改进

### 代码质量
- **598 个测试**：完整测试覆盖率（较 v0.9.0 增加 3.3 倍）
- **30 个模块**：模块化架构，关注点分离清晰
- **~6,500 行代码**：组织良好的代码库，编码标准一致
- **类型提示**：完整静态类型检查，符合 mypy 规范

### 文档
- **更新 README**：完整 v1.0.0 功能说明文档（英文与繁体中文）
- **键盘快捷键**：所有视图的完整快捷键说明
- **使用流程指南**：为新用户提供逐步使用说明
- **架构图表**：为开发者提供清晰的数据流可视化

### UI/UX
- **赛博墨韵主题**：一致的暗色主题，搭配霓虹青 (#00F0FF) 强调色
- **金色启用状态**：新增金色 (#D4AF37) 用于启用按钮（循环、节拍器）
- **改进对比度**：更好的文字对比，提升无障碍性
- **可勾选按钮**：切换状态的视觉反馈（循环/节拍器）

---

## 🐛 错误修正

- **修正 MIDI 设备选择**：偏好设备现在在启动时正确优先连接
- **修正循环重启**：循环模式现在正确重置播放位置到开头
- **修正节拍器计时**：倒数时钟事件与播放线程同步
- **修正设置持久化**：所有设置现在正确保存与恢复

---

## 📦 技术细节

### 依赖项
- Python 3.11 / 3.12 / 3.13
- PyQt6 6.8.1
- mido 1.3.4
- python-rtmidi 1.5.9
- pytest 8.3.5

### 平台支持
- Windows 10 / 11 (x64)
- 需要系统管理员权限以执行 SendInput

### 构建
- PyInstaller 打包执行文件：`dist/赛博琴仙/` (~95 MB)
- 单文件夹发行版，包含所有依赖项

---

## 🚀 升级指南

### 从 v0.9.x 升级到 v1.0.0

1. **备份数据**：从曲库导出任何自定义 MIDI 项目
2. **卸载旧版本**：移除旧的执行文件或 Python 安装
3. **安装 v1.0.0**：下载并解压缩新版本
4. **配置设置**：按 `Ctrl+,` 设置偏好的 MIDI 设备
5. **验证映射**：点击「查看映射」确认正确的按键配置

### 重大变更
- **无**：v1.0.0 完全向后兼容 v0.9.x 项目文件

---

## 🙏 致谢

特别感谢：
- 所有在 v0.9.x 测试期间提供反馈的用户
- 报告问题并建议改进的贡献者
- 开源 MIDI 与 PyQt 社区

---

## 📝 已知问题

- **Windows Defender**：可能将执行文件标记为未识别应用程序（点击「更多信息」→「仍要运行」）
- **输入法编辑器**：某些输入法软件可能干扰按键注入（参见 FAQ）
- **高 DPI 显示器**：UI 缩放在 4K 屏幕上可能不完美（解决方法：将 Windows 缩放设为 150%）

完整问题追踪，请见：https://github.com/EdmondVirelle/cyber-qin/issues

---

## 🔮 未来计划

v1.1.0 规划功能：
- 云端存储/同步 MIDI 曲库
- MIDI 输入监控图表
- 自定义键位映射编辑器
- 多语言本地化改进

---

**完整变更记录**: https://github.com/EdmondVirelle/cyber-qin/compare/v0.9.2...v1.0.0
**下载**: https://github.com/EdmondVirelle/cyber-qin/releases/tag/v1.0.0

